<HTML>
  <HEAD>
    <TITLE>asio Design: Threads</TITLE>
    <LINK HREF="asio.css" REL="stylesheet" TYPE="text/css">
    <LINK HREF="tabs.css" REL="stylesheet" TYPE="text/css">
  </HEAD>
  <BODY BGCOLOR="#FFFFFF">
    <DIV CLASS="qindex">
      <TABLE BORDER="0" WIDTH="100%">
        <TR>
          <TD ALIGN="LEFT">
            <B>asio 0.3.7</B>
          </TD>
          <TD ALIGN="RIGHT">
            <A CLASS="qindex" HREF="../index.html">Home</A> |
            <A CLASS="qindex" HREF="../reference/index.html">Reference</A> |
            <A CLASS="qindex" HREF="../tutorial/index.html">Tutorial</A> |
            <A CLASS="qindex" HREF="../examples/index.html">Examples</A> |
            <A CLASS="qindex" HREF="../design/index.html">Design</A>
          </TD>
        </TR>
      </TABLE>
    </DIV>
    <DIV CLASS="qindex">
      <TABLE BORDER="0" WIDTH="100%">
        <TR>
          <TD ALIGN="LEFT">
            <B>Design</B>
          </TD>
        </TR>
      </TABLE>
    </DIV>
<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="designthreads">Threads</a></h1>The implementation of asio for a particular platform may make use of one or more additional threads to emulate asynchronicity. As far as possible, these threads must be invisible to the library user. In particular, the threads:<p>
<ul>
<li>must not call the user's code directly. </li>
<li>must block all signals.</li>
</ul>
This approach is complemented by the following guarantee:<p>
<ul>
<li>Asynchronous completion handlers will only be called from threads that are currently calling <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a>.</li>
</ul>
Consequently, it is the library user's responsibility to create and manage all threads to which the notifications will be delivered.<h2><a class="anchor" name="designthreadsrationale">
Rationale</a></h2>
<ul>
<li>By only calling <a class="elRef" doxygen="asio.doxytags:../reference/" href="../reference/a00140.html#50ae7753f2c851cd3e91724bbfc5b444">asio::io_service::run()</a> from a single thread, the user's code can be avoid the development complexity associated with synchronisation. For example, a library user can implement scalable servers that are single-threaded (from the user's point of view). </li>
<li>A library user may need to perform initialisation in a thread shortly after the thread starts and before any other application code is executed. For example, users of Microsoft's COM must call CoInitializeEx before any other COM operations can be called from that thread. </li>
</ul>
    <DIV CLASS="qindex">
      <TABLE BORDER="0" WIDTH="100%">
        <TR>
          <TD ALIGN="LEFT">
            <B>asio 0.3.7</B>
          </TD>
          <TD ALIGN="RIGHT">
            <A CLASS="qindex" HREF="../index.html">Home</A> |
            <A CLASS="qindex" HREF="../reference/index.html">Reference</A> |
            <A CLASS="qindex" HREF="../tutorial/index.html">Tutorial</A> |
            <A CLASS="qindex" HREF="../examples/index.html">Examples</A> |
            <A CLASS="qindex" HREF="../design/index.html">Design</A>
          </TD>
        </TR>
      </TABLE>
    </DIV>
  </BODY>
</HTML>
